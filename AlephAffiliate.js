(()=>{"use strict";(()=>{const o="AlephIframe",e=function(){try{return document.currentScript}catch(o){return document.getElementById("AlephLoader")}}(),t={title:"Buy tokens here instantly",referrerpolicy:"origin",frameborder:"0",height:"500",width:"300",style:'{\n        position = "relative";\n        left = "50%";\n        right = "50%";\n    }'},n=()=>{let o=window.location.search;if(""===o){const e=window.location.hash;""!==e&&-1!==e.indexOf("?")&&(s&&console.log("Found affiliate in hashed URL"),o=e.substring(e.indexOf("?")))}return console.log("queryString :",o),new URLSearchParams(o)},r={get:o=>{if(!document.cookie)return"";const e=document.cookie.match(`(?:(?:^|.*; *)${o} *= *([^;]*).*$)|^.*$`);return e?e.length<1?"":e[1]?decodeURIComponent(e[1]):"":""},set:(o,e,t={})=>{t.days&&(t["max-age"]=60*t.days*60*24,delete t.days);const n=Object.entries(t).reduce(((o,[e,t])=>`${o}; ${e}=${t}`),"");return document.cookie=`${o}=${encodeURIComponent(e)}${n}`,!0},delete:(o,e)=>{r.set(o,"",Object.assign({"max-age":-1},e))},setJSON:(o,e,t)=>r.set(o,JSON.stringify(e),t),getJSON:o=>{const e=r.get(o);return JSON.parse(e)}},s=!0,a=(o,e)=>{if("object"!=typeof o)throw new Error("DV: does not work for individual vars, instead pass them like {a:a}.");void 0===e&&(e=l);for(const e in o){let t=`(${typeof o[e]}):`;"object"==typeof o[e]&&(t+="\n"),Array.isArray(o[e])&&(t=`(array ${o[e].length}):\n`),console.log(` - ${e} ${t}`,o[e])}},i="affiliation",l=console.log,c=console.error,d=console.warn,f=o=>"string"==typeof o&&""!==o&&!!o.match(/^0x[a-fA-F0-9]{40}$/);function u(){const o=(o=>{const e=n().has("a");return console.log("paramName a is set :",e),e})();s&&a({hasParam:o});const e=(o=>{const e=n().get("a");return console.log("paramName a value :",e),e})();a({urlAffiliator:e});const t={urlAddress:"",urlValid:!1,storedAddress:"",storedValid:!1};if(o&&e){const o=(u=e).startsWith("0x")&&f(u)?u:(o=>"0x"+o.split("").reverse().join(""))(u);a({urlAddress:o}),t.urlAddress=o,f(o)?(t.urlValid=!0,l=o,console.log("saveAffiliator"),a({affiliatorAddress:l}),((o,e)=>{let t=!1;try{window.localStorage.setItem(o,e),s&&console.log("\n***** Success saving to LocalStorage"),t=!0}catch(t){console.log("\n***** Error saving to LocalStorage:"),a({key:o}),a({value:e}),console.log(t)}try{t=r.setJSON(i,{[o]:e},{path:"/",days:364}),t&&s&&console.log("\n***** Success saving to cookie")}catch(t){console.log("\n***** Error saving to cookie:"),a({key:o}),a({value:e}),console.log(t)}if(!t)throw new Error("All means of saving key failed")})("AlephAffiliator",l)):c("URL param from affiliator but address was not valid")}var l,u;try{t.storedAddress=(s&&console.log("loadAffiliator"),String((o=>{let e=null;try{if(e=window.localStorage.getItem(o),e){if(s&&console.log("\n***** LocalStorage found value for:"),s&&a({key:o}),s&&a({value:e}),!s)return e}else console.log("\n***** LocalStorage value empty for"),a({key:o})}catch(e){console.log("\n***** Error reading LocalStorage:"),a({key:o}),console.log(e)}try{const t=r.getJSON(i);if(t[o]){if(e=t[o],s&&console.log("\n***** Cookie found value for:"),s&&a({key:o}),s&&a({value:e}),!s)return e}else console.log("\n***** Cookie value empty for"),a({key:o})}catch(e){console.warn("\n***** Error reading Cookie:"),a({key:o}),console.log(e)}return e})("AlephAffiliator"))),t.storedAddress&&(t.storedValid=f(t.storedAddress))}catch(o){d(o)}return t}let g=0;function m(o){return"https://alephdao.com/"+"?"+function(o){const e=[];for(const t in o)e.push(encodeURIComponent(t)+"="+encodeURIComponent(o[t]));return e.join("&")}(o)+"#/AlephSwap"}window.onload=function n(r){l("window.onload"),function(o){l("loadIframe");const n=t;n.src=m(function(o,e){const t={};return["chainId","address","decimals","symbol","name","fees","logo","slippage"].forEach((function(e){const n=o.getAttribute(e);null!==n&&(t[e]=n)})),t}(e)),n.id=o,function(o,e,t,n){const r=document.createElement("iframe");null!=e&&function(o,e){for(const t in e)void 0!==e[t]&&o.setAttribute(t,e[t])}(r,e),r.innerHTML=t,function(o,e){e.parentNode&&e.parentNode.insertBefore(o,e.nextSibling)}(r,n)}(0,t,"The iframe tag is not supported by your browser. Please try on desktop!",e)}(r);const s=document.getElementById(r);if(!s){if(g++,console.log("IframeSearches = ",g),g<30)return void window.setTimeout((function(){n(r)}),150);throw new Error(`No Iframe found with Id: ${r}`)}l("Detected Iframe"),s.addEventListener("load",(function(){console.log("Detecteded Iframe load"),function(e){console.log("Setting up affiliate at ",window.location.href),function(e,t){console.log(`Posting message to iframe ${e}`);const n=document.getElementById(e);if(!n)throw new Error(`No Iframe found with Id: ${e}`);const r=n.src;if(t.actor=o,!n.contentWindow)throw new Error("Iframe.contentWindow is not loaded for Iframe with Id:"+e);n.contentWindow.postMessage(t,new URL(r).origin)}(e,u())}(r)}))}(o),console.log("Goeee")})()})();